(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-confusion"],{"0f14":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decrypt=o;var n=a("ef93"),r=n.enc.Utf8.parse("1234123412ABCDEF"),i=n.enc.Utf8.parse("ABCDEF1234123412");function o(e){var t=n.enc.Hex.parse(e),a=n.enc.Base64.stringify(t),o=n.AES.decrypt(a,r,{iv:i,mode:n.mode.CBC,padding:n.pad.Pkcs7}),s=o.toString(n.enc.Utf8);return s.toString()}},"4a38":function(e,t,a){"use strict";function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function i(e){var t=u();return function(){var a,n=c(e);if(t){var r=c(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return o(this,a)}}function o(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,a){return t&&d(e.prototype,t),a&&d(e,a),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p={RewardedVideo:"RewardedVideo",FullScreenVideo:"FullScreenVideo"},m=function(){function e(){l(this,e),this._ads={}}return f(e,[{key:"load",value:function(e,t,a){var n=this._fixOldOptions(e),r=n.adpid;r&&!this.isBusy(r)&&this.get(n).load(t,a)}},{key:"show",value:function(e,t,a){var n=this._fixOldOptions(e),r=n.adpid;if(r){uni.showLoading({mask:!0});var i=this.get(n);i.load((function(){uni.hideLoading(),i.show((function(e){t&&t(e)}))}),(function(e){uni.hideLoading(),a&&a(e)}))}}},{key:"isBusy",value:function(e){return this._ads[e]&&this._ads[e].isLoading}},{key:"get",value:function(e){var t=e.adpid;return this._ads[t]||(this._ads[t]=this._createAdInstance(e)),this._ads[t]}},{key:"_createAdInstance",value:function(e){var t=e.adType||p.RewardedVideo;delete e.adType;var a=null;return t===p.RewardedVideo?a=new y(e):t===p.FullScreenVideo&&(a=new b(e)),a}},{key:"_fixOldOptions",value:function(e){return"string"===typeof e?{adpid:e}:e}}]),e}(),g=18e5,h={CSJ:"csj",GDT:"gdt"},_=1,v=function(){function e(t){var a=this;l(this,e),this._isLoad=!1,this._isLoading=!1,this._lastLoadTime=0,this._lastError=null,this._retryCount=0,this._loadCallback=null,this._closeCallback=null,this._errorCallback=null;var n=this._ad=t;n.onLoad((function(e){a._isLoading=!1,a._isLoad=!0,a._lastLoadTime=Date.now(),a.onLoad()})),n.onAdClicked((function(){uni.setStorageSync("isVVip",!0),uni.setStorageSync("vVipStart",Date.now())})),n.onClose((function(e){a._isLoad=!1,a.onClose(e)})),n.onVerify((function(e){})),n.onError((function(e){var t=e.code,n=e.message;a._isLoading=!1;var r={code:t,errMsg:n};if(-5008!==t){if(a._retryCount<_)return a._retryCount+=1,void a._loadAd();a._lastError=r,a.onError(r)}else a._loadAd()}))}return f(e,[{key:"getProvider",value:function(){return this._ad.getProvider()}},{key:"load",value:function(e,t){this._loadCallback=e,this._errorCallback=t,this._isLoading||(this._isLoad?this.onLoad():(this._retryCount=0,this._loadAd()))}},{key:"show",value:function(e){if(this._closeCallback=e,!this._isLoading&&this._isLoad)if(null===this._lastError){var t=this.getProvider();t===h.CSJ&&this.isExpired?this._loadAd():this._ad.show()}else this.onError(this._lastError)}},{key:"onLoad",value:function(e){null!=this._loadCallback&&this._loadCallback()}},{key:"onClose",value:function(e){null!=this._closeCallback&&this._closeCallback({isEnded:e.isEnded})}},{key:"onError",value:function(e){null!=this._errorCallback&&this._errorCallback(e)}},{key:"destroy",value:function(){this._ad.destroy()}},{key:"_loadAd",value:function(){this._isLoad=!1,this._isLoading=!0,this._lastError=null,this._ad.load()}},{key:"isExpired",get:function(){return 0!==this._lastLoadTime&&Math.abs(Date.now()-this._lastLoadTime)>g}},{key:"isLoading",get:function(){return this._isLoading}}]),e}(),y=function(e){n(a,e);var t=i(a);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(this,a),t.call(this,plus.ad.createRewardedVideoAd(e),e)}return a}(v),b=function(e){n(a,e);var t=i(a);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(this,a),t.call(this,plus.ad.createFullScreenVideoAd(e),e)}return a}(v),w=new m;t.default=w},"6efa":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={urls:["http://m.qiman6.com","http://m.qiman6.com"]},r=n;t.default=r},7397:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={urls:["https://scxs.pysmei.com/prov8/base/{sex}_fqhyxs.html","https://scxs.pysmei.com/prov8/base/{sex}.html","https://scxs.pysmei.com/prov8/base/{sex}2.html"],url:"https://scxs.pysmei.com/prov8/base/{sex}_fqhyxs.html",swiper:"https://scxs.pysmei.com/prov8/base/banner_{sex}.html",pic:"https://imgapixs.pysmei.com//BookFiles/BookImages/",view:"https://infosxs.pysmei.com/BookFiles/Html/{id}/info.html",direct:"https://infosxs.pysmei.com/BookFiles/Html/{id}/index.html",read:"https://contentxs.pysmei.com//BookFiles/Html/{id}/{cid}.html",type:"https://scxs.pysmei.com/top/{sex}/top/{type}/{date}/{page}.html",cateList:"https://scxs.pysmei.com/Categories/BookCategory.html",cateDetail:"https://scxs.pysmei.com/Categories/{id}/{type}/{page}.html",list:"https://scxs.pysmei.com/shudan/{sex}/all/{type}/{page}.html",detail:"https://infosxs.pysmei.com/shudan/detail/{id}.html",search:"https://souxs.leeyegy.com/search.aspx?key={sw}&page={page}&siteid=app2",staticFiles:"https://scxs.pysmei.com//StaticFiles/NewHotBook.html"},r=n;t.default=r},"827f":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=[{name:"\u5f39\u5e55",api:"http://api.leduozy.com/inc/api.php/",download:"",jiexiUrl:"https://api.leduotv.com/wp-api/ifr.php?vid=",isActive:!0},{key:"\u5feb\u64ad",name:"\u5feb\u64ad",api:"http://www.kuaibozy.com/api.php/provide/vod/at/xml/search",download:"",jiexiUrl:"https://jx.7kjx.com/?url=",isActive:!0}],r=n;t.default=r},9913:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={adultWords:[],hideCate:["\u7535\u5f71","\u7535\u5f71\u7247","\u7535\u89c6\u5267","\u8fde\u7eed\u5267","\u7efc\u827a","\u52a8\u6f2b"],configUrl:"https://xhy.coding.net/p/cainiaoblog/d/cainiaoblog/git/raw/master/appConfigs/config"},r=n;t.default=r},cffa:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(a("a34a")),r=d(a("4091")),i=d(a("0df0")),o=d(a("c037")),s=a("8384"),u=a("0f14"),c=d(a("9913")),l=d(a("827f"));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,a,n,r,i,o){try{var s=e[i](o),u=s.value}catch(c){return void a(c)}s.done?t(u):Promise.resolve(u).then(n,r)}function p(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){f(i,n,r,o,s,"next",e)}function s(e){f(i,n,r,o,s,"throw",e)}o(void 0)}))}}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _=c.default.configUrl,v=c.default.adultWords,y=void 0,b={namespaced:!0,state:{loading:!1,searchLoading:!1,config:{},videoList:[],searchList:[],searchIndex:0,siteOptions:[],curSite:0,cateOptions:[],curCate:-1,page:1,pageCount:1,sw:"",vid:"",current:0,playIndex:[],detail:{},detailUrl:"",download:[],detailImg:""},mutations:{updateLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.loading=t},updateSearchLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.searchLoading=t},updateConfig:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.config=t},updateVideoList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.videoList=t},clearVideoList:function(e){e.videoList=[]},updateSearchList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.searchList=t},clearSearcList:function(e){e.searchList=[]},updateSearchIndex:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.searchIndex=t},updateSiteOptions:function(e){var t=!!uni.getStorageSync("childMode"),a=o.default.get(e,"config.sites",[]),n=o.default.isEmpty(a)?[].concat(l.default):a,r=o.default.filter(n,(function(e){return null==e.isActive?!!e:e.isActive})),i=uni.getStorageSync("source")||[],s=[].concat(r,i),u=o.default.map(s,(function(e,t){return g(g({},e),{},{label:e.name,value:t})}));t&&(u=o.default.filter(u,(function(e){return e.group?!e.group.includes("18\u7981"):e}))),e.siteOptions=u},updateCateOptions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.cateOptions=t},updateCurSite:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.curSite=t},updateCurCate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e.curCate=t},updatePage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.page=t},updatePageCount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.pageCount=t},updateDetail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.detail=t},updateDetailUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.detailUrl=t},updateDownload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.download=t},updateCurrent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.current=t},updatePlayIndex:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.playIndex=t}},actions:{getAppConfigs:function(t,a){var n=t.commit;try{uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u914d\u7f6e",mask:!0}),i.default.get(_).then((function(e){if(uni.hideLoading(),200===e.statusCode){var t=e.data,r=(0,u.Decrypt)(t),i=JSON.parse(r);uni.setStorageSync("config",i),n("updateConfig",i)}else n("updateConfig");a&&a()}))}catch(r){e("log","getAppConfigs error",r," at store/modules/video.js:136"),uni.hideLoading(),a&&a()}},getCates:function(t,a){return p(n.default.mark((function s(){var u,c,l,d,f,p;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(u=t.state,c=t.commit,n.prev=1,l=u.siteOptions,d=a||o.default.get(l[u.curSite],"api"),d){n.next=6;break}return n.abrupt("return");case 6:return f=new r.default.Parser,n.next=9,i.default.get(d);case 9:p=n.sent,f.parseString(p.data,(function(e,t){if(!e){var a=o.default.isEmpty(t.rss.class)?[]:t.rss.class[0].ty,n=o.default.map(a,(function(e,t){return{label:e._,value:t,id:o.default.isUndefined(e.$.id)?0:e.$.id}})),r=!!uni.getStorageSync("childMode"),i=uni.getStorageSync("cateFilters")||"";if(r){var s=u.config.adultWords,l=o.default.isUndefined(s)?v:s;n=o.default.filter(n,(function(e){return!l.some((function(t){return t&&e.label.includes(t)}))}))}if(i){var d=i.split("$");n=o.default.filter(n,(function(e){return!d.some((function(t){return t&&e.label.includes(t)}))}))}c("updateCateOptions",n)}y=void 0,c("updateLoading",!1),uni.stopPullDownRefresh(),uni.hideLoading()})),n.next=20;break;case 13:n.prev=13,n.t0=n["catch"](1),e("log","getCates error",n.t0," at store/modules/video.js:180"),y=void 0,c("updateLoading",!1),uni.stopPullDownRefresh(),uni.hideLoading();case 20:case"end":return n.stop()}}),s,null,[[1,13]])})))()},getVideoData:function(t){return p(n.default.mark((function a(){var u,c,l,d,f,p,m,g,h,_,v;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(u=t.commit,c=t.state,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),!c.loading){a.next=5;break}return a.abrupt("return");case 5:if(a.prev=5,l=c.page,d=c.pageCount,!(l>d)){a.next=12;break}return uni.stopPullDownRefresh(),uni.hideLoading(),a.abrupt("return");case 12:if(u("updateLoading",!0),uni.stopPullDownRefresh(),f=c.siteOptions,p=c.curSite,m=c.curCate,g=o.default.get(f[p],"api"),g){a.next=20;break}return a.abrupt("return");case 20:h="".concat(g,"?ac=videolist&pg=").concat(l),-1!==m&&(_=c.cateOptions,v=_[m].id,h="".concat(h,"&t=").concat(v)),y&&y.abort(),y=i.default.get(h).then((function(e){var t=new r.default.Parser;t.parseString(e.data,(function(e,t){if(uni.hideLoading(),uni.stopPullDownRefresh(),!e){var a=o.default.isEmpty(t.rss.list[0].$)?{}:t.rss.list[0].$,n=o.default.isEmpty(c.videoList)?[]:c.videoList,r=o.default.isEmpty(t.rss.list[0].video)?[]:t.rss.list[0].video;r=(0,s.filterVideo)(r,c.cateOptions),r.sort((function(e,t){return new Date((0,s.formatDate)(t.last[0]))-new Date((0,s.formatDate)(e.last[0]))})),r=[].concat(n,r),u("updateVideoList",r),u("updatePageCount",1*a.pagecount||0),u("updatePage",1*a.page+1),u("updateLoading",!1),y=void 0,uni.stopPullDownRefresh(),uni.hideLoading()}}))})),a.next=33;break;case 26:a.prev=26,a.t0=a["catch"](5),e("log","getVideoData error :",a.t0," at store/modules/video.js:246"),y=void 0,u("updateLoading",!1),uni.stopPullDownRefresh(),uni.hideLoading();case 33:case"end":return a.stop()}}),a,null,[[5,26]])})))()},searchVideoData:function(t,a){return p(n.default.mark((function u(){var c,l,d,f,p,m,g;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(c=t.commit,l=t.state,d=t.dispatch,!l.searchLoading&&a){n.next=3;break}return n.abrupt("return");case 3:if(y&&y.abort(),c("updateSearchLoading",!0),c("clearSearcList"),uni.hideLoading(),uni.showLoading({title:"\u6b63\u5728\u641c\u7d22",mask:!0}),n.prev=8,f=l.siteOptions,p=l.searchIndex||0,m=o.default.get(f[p],"api"),m){n.next=14;break}return n.abrupt("return");case 14:d("getCates",m),g="".concat(m,"?wd=").concat(encodeURIComponent(a)),i.default.get(g).then((function(e){var t=new r.default.Parser;t.parseString(e.data,(function(e,t){if(!e){var n=o.default.isEmpty(t.rss.list[0].video)?[]:t.rss.list[0].video;if(!o.default.isEmpty(n)){n=o.default.filter(n,(function(e){return e.name[0].toLowerCase().includes(a.toLowerCase())}));var u=o.default.map(n,(function(e){return e.id[0]})).join(","),d="".concat(m,"?ac=videolist&ids=").concat(u);y=i.default.get(d).then((function(e){var t=new r.default.Parser;t.parseString(e.data,(function(e,t){var n=o.default.isEmpty(t.rss.list[0].video)?[]:t.rss.list[0].video;n=o.default.filter(n,(function(e){return e.name[0].toLowerCase().includes(a.toLowerCase())})),n=(0,s.filterVideo)(n,l.cateOptions),n.forEach((function(e){return e.detail="".concat(m,"?ac=videolist&ids=").concat(e.id)})),n.sort((function(e,t){return new Date((0,s.formatDate)(t.last[0]))-new Date((0,s.formatDate)(e.last[0]))})),c("updateSearchList",n),c("updateSearchLoading",!1),uni.hideLoading()}))}))}}y=void 0,c("updateSearchLoading",!1),uni.hideLoading()}))})).catch((function(t){e("log","getSearchData error :",t," at store/modules/video.js:312"),y=void 0,c("updateSearchLoading",!1),uni.hideLoading(),uni.showToast({title:"\u6ca1\u6709\u641c\u5230",icon:"none"})})),n.next=26;break;case 19:n.prev=19,n.t0=n["catch"](8),e("log","getSearchData error :",n.t0," at store/modules/video.js:322"),y=void 0,c("updateSearchLoading",!1),uni.hideLoading(),uni.showToast({title:"\u6ca1\u6709\u641c\u5230",icon:"none"});case 26:case"end":return n.stop()}}),u,null,[[8,19]])})))()},getDetail:function(t,a){return p(n.default.mark((function s(){var u,c,l,d,f,p,m,h,_,v,b,w,L,x,k,C,P;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(u=t.commit,c=t.state,l=t.dispatch,d=a.vid,f=a.detailUrl,uni.stopPullDownRefresh(),uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u8be6\u60c5"}),n.prev=5,p=c.siteOptions,!o.default.isEmpty(p)){n.next=11;break}return n.next=10,u("updateSiteOptions");case 10:p=c.siteOptions;case 11:return m=c.curSite,h=o.default.get(p[m],"api",""),_=f||"".concat(h,"?ac=videolist&ids=").concat(d),"string"===typeof _&&u("updateDetailUrl",_),v=_.match(/(^http.*?)\/\?/),b=v?v[1]:"",w=o.default.find(p,(function(e){return e.api.includes(b)||b.includes(e.api)})),L=o.default.get(w,"download",w),x=o.default.get(w,"name",w),k=o.default.get(w,"jiexiUrl",""),C=o.default.get(w,"needjx",""),P="".concat(L,"?ac=videolist&ids=").concat(d),L&&l("getDownload",P),n.next=26,i.default.get(_).then((function(e){var t=new r.default.Parser;t.parseString(e.data,(function(e,t){if(uni.hideLoading(),!e){var a=t.rss.list&&t.rss.list[0].video&&t.rss.list[0].video[0];u("updateDetail",g(g({},a),{},{jiexiUrl:k,needjx:C,sourceName:x})||{})}}))})).catch((function(e){y=void 0,u("updateLoading",!1),uni.stopPullDownRefresh(),uni.hideLoading()}));case 26:n.next=33;break;case 28:n.prev=28,n.t0=n["catch"](5),e("log","getDetail error",n.t0," at store/modules/video.js:383"),uni.hideLoading(),uni.showToast({icon:"none",title:"\u7a0d\u540e\u518d\u8bd5"});case 33:case"end":return n.stop()}}),s,null,[[5,28]])})))()},getDownload:function(t,a){return p(n.default.mark((function o(){var s;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.state,s=t.commit,n.prev=1,n.next=4,i.default.get(a).then((function(t){var a=new r.default.Parser;a.parseString(t.data,(function(t,a){if(e("log","getDownload",a," at store/modules/video.js:399"),uni.hideLoading(),!t){var n=a.rss.list&&a.rss.list[0].video&&a.rss.list[0].video[0],r=(((n||{}).dl||[])[0]||{}).dd||[];s("updateDownload",r)}}))}));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](1),e("log","getDownload",n.t0," at store/modules/video.js:409");case 9:case"end":return n.stop()}}),o,null,[[1,6]])})))()},updateStore:function(e,t){return p(n.default.mark((function a(){var r,i,o,s;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=e.state,i=!!uni.getStorageSync("like##".concat(r.detailUrl)),o=r.detailUrl,s=g(g({},r.detail),{},{num:t,link:o,time:Date.now()}),uni.setStorage({key:"history##".concat(r.detailUrl),data:g(g({},s),{},{key:"history##".concat(r.detailUrl)})}),i&&uni.setStorage({key:"like##".concat(r.detailUrl),data:g(g({},s),{},{key:"like##".concat(r.detailUrl)})});case 6:case"end":return a.stop()}}),a)})))()}},getters:{status:function(e){return e.page>e.pageCount?"nomore":e.loading?"loading":"loadmore"}}};t.default=b}).call(this,a("0de9")["default"])},df91:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__("a34a")),_lodash=_interopRequireDefault(__webpack_require__("c037")),_ajax=_interopRequireDefault(__webpack_require__("0df0")),_books=_interopRequireDefault(__webpack_require__("7397"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,a,n,r,i,o){try{var s=e[i](o),u=s.value}catch(c){return void a(c)}s.done?t(u):Promise.resolve(u).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){asyncGeneratorStep(i,n,r,o,s,"next",e)}function s(e){asyncGeneratorStep(i,n,r,o,s,"throw",e)}o(void 0)}))}}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"===typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var sexName=["lady","man"],_default={namespaced:!0,state:{loading:!1,sex:0===uni.getStorageSync("sex")?0:1,banners:[],list:[],bookList:[],hasNextPage:!0,fltList:[],detail:{},direct:{},cates:[],content:{},rcid:-1,page:1,curRank:0,curCate:0,curDate:0,dateList:[{id:"total",name:"\u5168\u90e8"},{id:"week",name:"\u5468\u699c"},{id:"month",name:"\u6708\u699c"},{id:"total",name:"\u603b\u699c"}],rankList:[{id:"hot",name:"\u70ed\u95e8"},{id:"new",name:"\u65b0\u4e66"},{id:"over",name:"\u5b8c\u672c"},{id:"vote",name:"\u8bc4\u5206"},{id:"collect",name:"\u6536\u85cf"},{id:"commend",name:"\u63a8\u8350"}],cateRankList:[{id:"hot",name:"\u70ed\u95e8"},{id:"new",name:"\u65b0\u4e66"},{id:"over",name:"\u5b8c\u672c"},{id:"vote",name:"\u8bc4\u5206"}]},mutations:{updateLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.loading=t},updateSex:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.sex=t,uni.setStorageSync("sex",t),e.page=1,e.bookList=[],e.hasNextPage=!0},updateBanners:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.banners=_toConsumableArray(t)},updateList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.list=t,e.curRank=0,e.curCate=0,e.curDate=0,e.page=1,e.bookList=[],e.hasNextPage=!0},updateCates:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.cates=_toConsumableArray(t)},updateTabs:function(e,t){var a=t.type,n=t.value;"curCate"===a&&e.curRank>3&&(e.curRank=0),"curDate"===a&&n>0&&(e.curCate=0),"curCate"===a&&n>0&&(e.curDate=0),e[a]=n,e.page=1,e.bookList=[],e.hasNextPage=!0},updatePage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.page=t},updateBookList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.bookList=[].concat(e.bookList,t)},clearBookList:function(e){e.bookList=[]},updateFltList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.fltList=[].concat(e.fltList,t)},clearFltList:function(e){e.fltList=[]},updateHasNextPage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.hasNextPage=t},updateDetail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.detail=_objectSpread({},t)},updateDirect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.direct=_objectSpread({},t)},updateContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.content=_objectSpread({},t)},updateRcid:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.rcid=t}},actions:{getBooks:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function a(){var n,r,i,o,s,u,c,l,d,f,p,m;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,r=e.state,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=3,n("updateLoading",!0),i=_books.default.urls,o=i.length,s=Math.floor(Math.random()*o),u=i[s],c=r.sex,l=[],d=[],f=_books.default.swiper.replace("{sex}",sexName[c]),p=u.replace("{sex}",sexName[c]),m=[_ajax.default.get(f),_ajax.default.get(p)],a.next=17,Promise.all(m).then((function(e){e[0]&&200===e[0].statusCode&&(d[c]=[].concat(e[0].data.data),n("updateBanners",d)),e[1]&&200===e[1].statusCode&&(l[c]=[].concat(e[1].data.data),n("updateList",l)),n("updateLoading",!1),t&&t()}));case 17:uni.hideLoading(),a.next=23;break;case 20:a.prev=20,a.t0=a["catch"](3),t&&t();case 23:case"end":return a.stop()}}),a,null,[[3,20]])})))()},getCates:function(e){return _asyncToGenerator(_regenerator.default.mark((function t(){var a;return _regenerator.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,a=e.commit,uni.hideLoading(),uni.showLoading({title:"\u83b7\u53d6\u5206\u7c7b"}),t.prev=3,t.next=6,_ajax.default.get(_books.default.cateList).then((function(e){e&&200===e.statusCode&&a("updateCates",e.data.data)}));case 6:uni.hideLoading(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](3),uni.hideLoading();case 12:case"end":return t.stop()}}),t,null,[[3,9]])})))()},getList:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function a(){var n,r,i,o,s,u,c,l,d;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.state,r=e.commit,t&&r("clearBookList"),n.hasNextPage){a.next=4;break}return a.abrupt("return");case 4:if(uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=6,i="",o=n.sex,s=n.page,u=n.rankList[n.curRank].id,c=n.dateList[n.curDate].id,l=0===n.curCate?0:n.curCate-1,d=n.cates[l].Id,i=n.curCate>0?_books.default.cateDetail.replace("{id}",d).replace("{type}",u).replace("{page}",s):_books.default.type.replace("{sex}",sexName[o]).replace("{type}",u).replace("{date}",c).replace("{page}",s),a.t0=i,!a.t0){a.next=19;break}return a.next=19,_ajax.default.get(i).then((function(e){if(e&&200===e.statusCode){var t=e.data.data.BookList,a=e.data.data.HasNext,i=n.page+1;r("updateBookList",t),r("updateHasNextPage",a),a&&r("updatePage",i)}}));case 19:uni.hideLoading(),a.next=25;break;case 22:a.prev=22,a.t1=a["catch"](6),uni.hideLoading();case 25:case"end":return a.stop()}}),a,null,[[6,22]])})))()},getFltList:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function a(){var n,r;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.state,r=e.commit,n.hasNextPage){a.next=3;break}return a.abrupt("return");case 3:return uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=5,a.next=8,_ajax.default.get(t).then((function(e){if(e&&200===e.statusCode){var t=e.data.data.BookList||e.data.data,a=e.data.data.HasNext,i=n.page+1;r("updateFltList",t),r("updateHasNextPage",a),a&&r("updatePage",i)}}));case 8:uni.hideLoading(),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](5),uni.hideLoading();case 14:case"end":return a.stop()}}),a,null,[[5,11]])})))()},getDetail:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function a(){var n;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=3,a.next=6,_ajax.default.get(t).then((function(e){e&&200===e.statusCode&&n("updateDetail",e.data.data)}));case 6:uni.hideLoading(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](3),uni.hideLoading();case 12:case"end":return a.stop()}}),a,null,[[3,9]])})))()},getDirect:function getDirect(_ref7,url){return _asyncToGenerator(_regenerator.default.mark((function _callee6(){var commit;return _regenerator.default.wrap((function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return commit=_ref7.commit,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),_context6.prev=3,_context6.next=6,_ajax.default.get(url).then((function(res){if(res&&200===res.statusCode){var data=eval("("+res.data+")");commit("updateDirect",data.data)}}));case 6:uni.hideLoading(),_context6.next=12;break;case 9:_context6.prev=9,_context6.t0=_context6["catch"](3),uni.hideLoading();case 12:case"end":return _context6.stop()}}),_callee6,null,[[3,9]])})))()},getRead:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function a(){var n;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=3,a.next=6,_ajax.default.get(t).then((function(e){e&&200===e.statusCode&&n("updateContent",e.data.data)}));case 6:uni.hideLoading(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](3),uni.hideLoading();case 12:case"end":return a.stop()}}),a,null,[[3,9]])})))()}},getters:{bannerImgs:function(e){var t=e.sex,a=e.banners[t]||[];return a.map((function(e){return e.image=e.imgurl,e.imgurl}))},cateList:function(e){var t=e.cates.map((function(e){return e.name=e.Name,e}));return t.unshift({Id:"none",name:"\u5168\u90e8",Name:"\u5168\u90e8"}),t}}};exports.default=_default},f2b0:function(module,exports,__webpack_require__){"use strict";(function(__f__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__("a34a")),_lodash=_interopRequireDefault(__webpack_require__("c037")),_ajax=_interopRequireDefault(__webpack_require__("0df0")),_htmlParser=_interopRequireDefault(__webpack_require__("c282")),_comics=_interopRequireDefault(__webpack_require__("6efa")),_util=__webpack_require__("8384");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,a,n,r,i,o){try{var s=e[i](o),u=s.value}catch(c){return void a(c)}s.done?t(u):Promise.resolve(u).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){asyncGeneratorStep(i,n,r,o,s,"next",e)}function s(e){asyncGeneratorStep(i,n,r,o,s,"throw",e)}o(void 0)}))}}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"===typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _default={namespaced:!0,state:{swipers:[],list:[],curRank:"1-1",curPage:1,rankList:[],curCate:"",cateList:[],pageList:[],moreStatus:"loadmore",detail:{},rcid:"",fltList:[],direct:{},content:{}},mutations:{updateHomeData:function(e,t){e.updateStatus=!!t},updateSwipers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.swipers=_toConsumableArray(t)},updateList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.list=_toConsumableArray(t)},updateRankList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.rankList=_toConsumableArray(t)},updateCateList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.cateList=_toConsumableArray(t)},setPageList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.pageList=_toConsumableArray(t)},updatePageList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.pageList=[].concat(_toConsumableArray(e.pageList),_toConsumableArray(t))},updateCurPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.curpage=t},updateMoreStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loadmore";e.moreStatus=t},updateDetail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.detail=_objectSpread({},t)},updateRcid:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.rcid=t},updateFltList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.fltList=_toConsumableArray(t)},updateDirect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.direct=_objectSpread({},t)},updateContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.content=_objectSpread({},t)}},actions:{getHomeData:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function t(){var a,n,r;return _regenerator.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),t.prev=3,n=_ajax.default.get(_comics.default.urls[0]),r=_ajax.default.get(_comics.default.urls[1]),t.next=8,Promise.race([n,r]).then((function(e){var t=[],n=[],r=(0,_htmlParser.default)((0,_util.tostring)(e.data)),i=r.getElementsByClassName("swiper-wrapper"),o=new _htmlParser.default(i),s=o.getElementsByTagName("a"),u=o.getElementsByTagName("img");_lodash.default.each([].concat(s||[]),(function(e,a){var n={href:e.attributes.href.replace(/\//g,""),image:u[a].attributes["data-src"],title:u[a].attributes.alt};t.push(n)})),t.length&&a("updateSwipers",t);var c=r.getElementsByClassName("floor");_lodash.default.each([].concat(c||[]),(function(e,t){var a=new _htmlParser.default(e),r=a.getElementsByClassName("title")[0],i=new _htmlParser.default(r),o=i.getElementsByTagName("a")[0],s=i.getElementsByTagName("span")[0],u=s.innerHTML,c=o.attributes.href;n[t]||(n[t]={}),n[t].title=u,n[t].more=c;var l=a.getElementsByClassName("comic-big")[0];if(l){var d=new _htmlParser.default(l),f=d.getElementsByTagName("a")[0],p=f.attributes.href.replace(/\//g,""),m=new _htmlParser.default(f),g=m.getElementsByTagName("img")[0],h=g.attributes["data-src"],_=m.getElementsByTagName("p"),v=_[0].innerHTML,y=_[1].innerHTML;n[t]||(n[t]={}),n[t].list=[].concat(n[t].list||[],{name:v,update:y,href:p,imgSrc:h})}var b=a.getElementsByClassName("m-up-item1");_lodash.default.each([].concat(b||[]),(function(e,a){var r=new _htmlParser.default(e),i=r.getElementsByTagName("img")[0],o=i.attributes["data-src"],s=r.getElementsByTagName("a")[0],u=s.attributes.href.replace(/\//g,""),c=r.getElementsByClassName("comic-name")[0],l=(0,_util.trimInnerHtml)(c.innerHTML),d=r.getElementsByClassName("tag-box")[0],f=(0,_util.trimInnerHtml)(d.innerHTML),p=r.getElementsByClassName("comic-click")[0],m=(0,_util.trimInnerHtml)(p.innerHTML);n[t].list=[].concat(n[t].list||[],{name:l,update:m,href:u,imgSrc:o,author:f})}));var w=a.getElementsByClassName("comic-item");_lodash.default.each([].concat(w||[]),(function(e,a){var r=new _htmlParser.default(e),i=r.getElementsByTagName("a")[0],o=i.attributes.href.replace(/\//g,""),s=r.getElementsByClassName("comic-name")[0],u=r.getElementsByClassName("comic-tip")[0],c=r.getElementsByTagName("img")[0],l=s.innerHTML,d=u.innerHTML,f=c.attributes["data-src"];n[t]||(n[t]={}),n[t].list=[].concat(n[t].list||[],{name:l,update:d,href:o,imgSrc:f})}))})),n.length&&a("updateList",n)}));case 8:uni.hideLoading(),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),uni.hideLoading(),__f__("log",t.t0," at store/modules/comic.js:188");case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},getRankList:function(e){return _asyncToGenerator(_regenerator.default.mark((function t(){var a,n,r;return _regenerator.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,n=_ajax.default.get(_comics.default.urls[0]+"/rank/1-1.html"),r=_ajax.default.get(_comics.default.urls[1]+"/rank/1-1.html"),t.next=6,Promise.race([n,r]).then((function(e){var t=[],n=(0,_htmlParser.default)((0,_util.tostring)(e.data)),r=n.getElementsByClassName("rank-nav-item");_lodash.default.each([].concat(r||[]),(function(e,a){var n=new _htmlParser.default(e),r=n.getElementsByTagName("a")[0],i=r.attributes.href,o=(0,_util.trimInnerHtml)(r.innerHTML);t.push({name:o,href:i})})),t.length&&a("updateRankList",t)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),__f__("log",t.t0," at store/modules/comic.js:214");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getCateList:function(e){return _asyncToGenerator(_regenerator.default.mark((function t(){var a,n,r;return _regenerator.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit;try{n=_ajax.default.get(_comics.default.urls[0]+"/sort/1-1.html"),r=_ajax.default.get(_comics.default.urls[1]+"/sort/1-1.html"),Promise.race([n,r]).then((function(e){var t=[],n=(0,_htmlParser.default)((0,_util.tostring)(e.data)),r=n.getElementsByClassName("rank-nav-item");_lodash.default.each([].concat(r||[]),(function(e,a){var n=new _htmlParser.default(e),r=n.getElementsByTagName("a")[0],i=r.attributes.href,o=(0,_util.trimInnerHtml)(r.innerHTML);t.push({name:o,href:i})})),t.length,a("updateCateList",t)}))}catch(i){__f__("log",i," at store/modules/comic.js:240")}case 2:case"end":return t.stop()}}),t)})))()},getList:function(e){var t=arguments;return _asyncToGenerator(_regenerator.default.mark((function a(){var n,r,i,o;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,r=t.length>1&&void 0!==t[1]?t[1]:"/sort/1-1.html",uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=4,i=_ajax.default.get(_comics.default.urls[0]+r),o=_ajax.default.get(_comics.default.urls[1]+r),a.next=9,Promise.race([i,o]).then((function(e){var t=[],a=(0,_htmlParser.default)((0,_util.tostring)(e.data)),r=a.getElementsByClassName("rank-item");_lodash.default.each([].concat(r||[]),(function(e,a){var n=new _htmlParser.default(e),r=n.getElementsByTagName("a")[0],i=n.getElementsByTagName("img")[0],o=n.getElementsByClassName("comic-name")[0],s=n.getElementsByClassName("comic-author")[0],u=n.getElementsByClassName("comic-tip")[0],c=r.attributes.href.replace(/\//g,""),l=i.attributes["data-src"],d=(0,_util.trimInnerHtml)(o.innerHTML),f=(0,_util.trimInnerHtml)(s.innerHTML),p=(0,_util.trimInnerHtml)(u.innerHTML);t.push({id:c,imgurl:l,name:d,author:f,remarks:p})})),n("setPageList",t),n("updateCurPage"),n("updateMoreStatus")}));case 9:uni.hideLoading(),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](4),uni.hideLoading(),__f__("log",a.t0," at store/modules/comic.js:285");case 16:case"end":return a.stop()}}),a,null,[[4,12]])})))()},getListMore:function(e){var t=arguments;return _asyncToGenerator(_regenerator.default.mark((function a(){var n,r,i,o,s,u,c,l,d;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,r=e.state,i=t.length>1&&void 0!==t[1]?t[1]:"/sort/1-1.html",uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=4,n("updateMoreStatus","loading"),o=i.match(/\/(\w+)\/(\d+)-\d+\.html/),s="sort"===o[1]?"sort/":"",u=o[2],c=r.curPage,l=_ajax.default.get(_comics.default.urls[0]+"/ajaxf/"+s+"?page_num="+c+"&type="+u),d=_ajax.default.get(_comics.default.urls[1]+"/ajaxf/"+s+"?page_num="+c+"&type="+u),a.next=14,Promise.race([l,d]).then((function(e){var t=Array.isArray(e.data)?e.data:null;n("updateMoreStatus",t?"loadmore":"nomore"),n("updatePageList",t||[]),n("updateCurPage",c+1)}));case 14:uni.hideLoading(),a.next=22;break;case 17:a.prev=17,a.t0=a["catch"](4),n("updateMoreStatus","nomore"),uni.hideLoading(),__f__("log",a.t0," at store/modules/comic.js:315");case 22:case"end":return a.stop()}}),a,null,[[4,17]])})))()},getDetail:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function a(){var n,r,i;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.state,n=e.commit,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=3,r=_ajax.default.get("".concat(_comics.default.urls[0],"/").concat(t,"/")),i=_ajax.default.get("".concat(_comics.default.urls[1],"/").concat(t,"/")),a.next=8,Promise.race([r,i]).then((function(e){var t=(0,_htmlParser.default)((0,_util.tostring)(e.data)),a=t.getElementsByClassName("comic-info-box")[0],r=new _htmlParser.default(a),i=r.getElementsByTagName("img")[0],o=r.getElementsByTagName("h1")[0],s=r.getElementsByTagName("p"),u="",c="",l="",d="",f=[];_lodash.default.each([].concat(s||[]),(function(e){var t=(0,_util.trimInnerHtml)(e.innerHTML);if(f.push(t),t.includes("\u4f5c\u8005")&&(u=t),t.includes("\u66f4\u65b0")&&(d=t),t.includes("\u6700\u65b0\u7ae0\u8282")){var a=new _htmlParser.default(e),n=a.getElementsByTagName("a")[0];c=n.attributes.href,l=t}}));var p=t.getElementsByClassName("start-read")[0],m=p.attributes.href,g=t.getElementsByClassName("comic-intro")[0],h=(0,_util.trimInnerHtml)(g.innerHTML),_=t.getElementsByClassName("comic-recommend")[0],v=new _htmlParser.default(_),y=v.getElementsByClassName("rec-item"),b=[];_lodash.default.each([].concat(y||[]),(function(e){var t=new _htmlParser.default(e),a=t.getElementsByTagName("a")[0],n=t.getElementsByTagName("img")[0],r=t.getElementsByClassName("comic-name")[0];b.push({href:a.attributes.href.replace(/\//g,""),imgSrc:n.attributes["data-src"],name:(0,_util.trimInnerHtml)(r.innerHTML)})}));var w={imgSrc:i.attributes.src,name:(0,_util.trimInnerHtml)(o.innerHTML),author:u,fcid:m,lcid:c,lcname:l,ltime:d,infoList:f,desc:h,recList:b};n("updateDetail",w)}));case 8:uni.hideLoading(),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](3),uni.hideLoading(),__f__("log",a.t0," at store/modules/comic.js:391");case 15:case"end":return a.stop()}}),a,null,[[3,11]])})))()},getDirect:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function a(){var n,r,i,o,s,u,c;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),a.prev=3,r=_ajax.default.get("".concat(_comics.default.urls[0],"/").concat(t,"/")),i=_ajax.default.get("".concat(_comics.default.urls[1],"/").concat(t,"/")),o=_ajax.default.post({url:"".concat(_comics.default.urls[0],"/bookchapter/"),header:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},data:{id:t,id2:"1"}}),s=_ajax.default.post({url:"".concat(_comics.default.urls[1],"/bookchapter/"),header:{"Content-Type":"application/x-www-form-urlencoded"},data:{id:t,id2:"1"}}),u=[],c="",a.next=12,Promise.race([r,i]).then((function(e){var t=(0,_htmlParser.default)((0,_util.tostring)(e.data)),a=t.getElementsByTagName("h1")[0];c=(0,_util.trimInnerHtml)(a.innerHTML);var n=t.getElementsByClassName("chapter-item");_lodash.default.each([].concat(n||[]),(function(e){var t=new _htmlParser.default(e),a=t.getElementsByTagName("a")[0],n=a.attributes.href.match(/\/(\w+)\./),r=n?n[1]:null,i=(0,_util.trimInnerHtml)(a.innerHTML);r&&u.push({id:r,name:i})}))}));case 12:return a.next=14,Promise.race([o,s]).then((function(e){200===e.statusCode&&(u=[].concat(u,e.data||[]))}));case 14:return a.next=16,n("updateDirect",{name:c,list:u});case 16:uni.hideLoading(),a.next=23;break;case 19:a.prev=19,a.t0=a["catch"](3),uni.hideLoading(),__f__("log",a.t0," at store/modules/comic.js:443");case 23:case"end":return a.stop()}}),a,null,[[3,19]])})))()},getFltList:function(e,t){return _asyncToGenerator(_regenerator.default.mark((function a(){var n,r,i;return _regenerator.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,a.prev=1,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),r=_ajax.default.get("".concat(_comics.default.urls[0],"/spotlight/?keyword=").concat(t)),i=_ajax.default.get("".concat(_comics.default.urls[1],"/spotlight/?keyword=").concat(t)),a.next=8,Promise.race([r,i]).then((function(e){var t=(0,_htmlParser.default)((0,_util.tostring)(e.data)),a=t.getElementsByClassName("comic-list-item"),r=[];_lodash.default.each([].concat(a||[]),(function(e){var t=new _htmlParser.default(e),a=t.getElementsByTagName("a")[0],i=a.attributes.href.replace(/\//g,""),o=t.getElementsByTagName("img")[0],s=o.attributes.src,u=t.getElementsByClassName("comic-name")[0],c=(0,_util.trimInnerHtml)(u.innerHTML),l=t.getElementsByClassName("comic-author")[0],d=(0,_util.trimInnerHtml)(l.innerHTML),f=t.getElementsByClassName("comic-tags")[0],p=(0,_util.trimInnerHtml)(f.innerHTML),m=t.getElementsByClassName("comic-update-at")[0],g=(0,_util.trimInnerHtml)(m.innerHTML);r.push({id:i,imgSrc:s,name:c,author:d,tag:p,update:g}),r.length&&n("updateFltList",r)}))}));case 8:uni.hideLoading(),a.next=16;break;case 11:a.prev=11,a.t0=a["catch"](1),__f__("log","comic getFltList:::",a.t0," at store/modules/comic.js:488"),uni.hideLoading(),__f__("log",a.t0," at store/modules/comic.js:490");case 16:case"end":return a.stop()}}),a,null,[[1,11]])})))()},getRead:function getRead(_ref9,cid){return _asyncToGenerator(_regenerator.default.mark((function _callee9(){var commit,url1,url2,bid;return _regenerator.default.wrap((function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return commit=_ref9.commit,uni.hideLoading(),uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),_context9.prev=3,url1=_ajax.default.get("".concat(_comics.default.urls[0],"/").concat(cid)),url2=_ajax.default.get("".concat(_comics.default.urls[1],"/").concat(cid)),bid=cid.match(/\/(\d+)\//)[1],_context9.next=9,Promise.race([url1,url2]).then((function(res){var doc=(0,_htmlParser.default)((0,_util.tostring)(res.data)),scripts=doc.getElementsByTagName("script"),imgList=[];_lodash.default.each([].concat(scripts||[]),(function(st){var str="";if(st.innerHTML.includes("eval(function")){str=st.innerHTML.trim();var sc=str.substring(5,str.length-1),newImgs=eval("("+sc+")"),imgs=newImgs.replace("var newImgs=","");imgList=JSON.parse(imgs)}}));var names=doc.getElementsByClassName("comic-name")[0],cname=(0,_util.trimInnerHtml)(names.innerHTML),prev=doc.getElementsByClassName("prev-chapter")[0],prevDoc=new _htmlParser.default(prev),prevA=prevDoc.getElementsByTagName("a")[0],prevHref=prevA.attributes.href,next=doc.getElementsByClassName("next-chapter")[0],nextDoc=new _htmlParser.default(next),nextA=nextDoc.getElementsByTagName("a")[0],nextHref=nextA.attributes.href,content={bid:bid,cid:cid,cname:cname,imgList:imgList,prevHref:prevHref,nextHref:nextHref};commit("updateContent",content)}));case 9:uni.hideLoading(),_context9.next=15;break;case 12:_context9.prev=12,_context9.t0=_context9["catch"](3),uni.hideLoading();case 15:case"end":return _context9.stop()}}),_callee9,null,[[3,12]])})))()}},getters:{}};exports.default=_default}).call(this,__webpack_require__("0de9")["default"])}}]);